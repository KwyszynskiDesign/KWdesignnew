<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portfolio projektów | KWdesignnew</title>

  <!-- GH Pages: globalna baza ścieżek -->
  <base href="https://kwyszynskidesign.github.io/KWdesignnew/">

  <!-- Style globalne -->
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Playfair+Display:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/style.css" />
  <link rel="stylesheet" href="assets/css/portfolio.css" />
</head>
<body class="portfolio-page">

  <!-- Header -->
  <header class="header">
    <div class="container header-inner">
      <a href="https://kwyszynskidesign.github.io/KWdesignnew/" class="logo">KW</a>
      <nav class="nav">
        <ul class="nav-list">
          <li><a href="https://kwyszynskidesign.github.io/KWdesignnew/">Start</a></li>
          <li><a href="index.html#why" class="smooth">Dlaczego ja</a></li>
          <li><a href="index.html#packages" class="smooth">Pakiety</a></li>
          <li><a href="index.html#contact" class="smooth">Kontakt</a></li>
        </ul>
        <button class="hamburger" aria-label="Menu">
          <span></span><span></span><span></span>
        </button>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero-section">
    <div class="container hero-content">
      <p class="hero-eyebrow">Moje realizacje</p>
      <h1 class="hero-title">Portfolio projektów</h1>
      <p class="hero-subtitle">Wybrane projekty: branding, strony WWW, automatyzacje.</p>
    </div>

    <!-- Karuzela -->
   <!-- Karuzela -->
<div class="carousel-outer" aria-label="Lista projektów">
  <div class="carousel-track" tabindex="0" aria-live="polite">
    <div id="voucher-magdy" class="carousel-item" data-project="voucher-salon-magdy.php">
      <h3>Voucher – Salon u Magdy</h3>
      <div class="ci-image">
        <img src="assets/images/Voucher Fryzjer_druk_KW-1.png" alt="Voucher – Salon u Magdy" loading="lazy" decoding="async" />
      </div>
    </div>

    <div id="strona-karoma" class="carousel-item" data-project="strona-karoma.html">
      <h3>Strona – Karoma</h3>
      <div class="ci-image">
        <img src="assets/images/Karoma_NewLogo.png" alt="Strona – Karoma" loading="lazy" decoding="async" />
      </div>
    </div>

    <div id="power-of-mind" class="carousel-item" data-project="power-of-mind.html">
      <h3>Pakiet – Power of Mind</h3>
      <div class="ci-image">
        <img src="assets/images/do SEO 1200x630.png" alt="Pakiet – Power of Mind" loading="lazy" decoding="async" />
      </div>
    </div>

    <div id="logo-marka-d" class="carousel-item" data-project="logo-marka-d.html">
      <h3>Logo – Marka D</h3>
      <div class="ci-image">
        <img src="assets/images/placeholder.jpg" alt="Logo – Marka D" loading="lazy" decoding="async" />
      </div>
    </div>

    <div id="strona-marka-e" class="carousel-item" data-project="strona-marka-e.html">
      <h3>Strona – Marka E</h3>
      <div class="ci-image">
        <img src="assets/images/placeholder.jpg" alt="Strona – Marka E" loading="lazy" decoding="async" />
      </div>
    </div>

    <div id="marka-f" class="carousel-item" data-project="marka-f.html">
      <h3>Pakiet – Marka F</h3>
      <div class="ci-image">
        <img src="assets/images/placeholder.jpg" alt="Pakiet – Marka F" loading="lazy" decoding="async" />
      </div>
    </div>
  </div>
</div>

<!-- Strzałki przeniesione POD karuzelę -->
<div class="carousel-controls" aria-hidden="false">
  <button class="carousel-nav prev" aria-label="Poprzednie">&lsaquo;</button>
  <button class="carousel-nav next" aria-label="Następne">&rsaquo;</button>
</div>

  </section>

  <!-- Viewer -->
  <section id="project-viewer" class="project-viewer hidden" aria-live="polite" aria-busy="false"></section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container footer-inner">
      <div class="footer-info">
        <p>&copy; <span id="year"></span> KWdesignnew. Wszelkie prawa zastrzeżone.</p>
      </div>
    </div>
  </footer>

  <!-- JS -->
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    (function(){
      const burger = document.querySelector('.hamburger');
      const navList = document.querySelector('.nav-list');
      if(burger && navList){
        burger.addEventListener('click', () => navList.classList.toggle('open'));
      }
    })();

    const track = document.querySelector('.carousel-track');
    const prevBtn = document.querySelector('.carousel-nav.prev');
    const nextBtn = document.querySelector('.carousel-nav.next');
    const projectViewer = document.getElementById('project-viewer');

    function getItemWidth(){
      const first = track.querySelector('.carousel-item');
      if (!first) return 0;
      const gap = parseFloat(getComputedStyle(track).gap || 0);
      return first.offsetWidth + gap;
    }
    const VISIBLE_COUNT = 3;

    function updateArrows(){
      const maxScroll = track.scrollWidth - track.clientWidth - 1;
      prevBtn.disabled = track.scrollLeft <= 0;
      nextBtn.disabled = track.scrollLeft >= maxScroll;
    }

    function scrollByItems(count){
      track.scrollBy({ left: getItemWidth() * count, behavior: 'smooth' });
      setTimeout(updateArrows, 350);
    }

    prevBtn.addEventListener('click', () => scrollByItems(-VISIBLE_COUNT));
    nextBtn.addEventListener('click', () => scrollByItems(+VISIBLE_COUNT));

    track.addEventListener('click', async (e) => {
      const item = e.target.closest('.carousel-item[data-project]');
      if (!item) return;
      track.querySelectorAll('.carousel-item.active').forEach(el => el.classList.remove('active'));
      item.classList.add('active');

      const file = item.getAttribute('data-project');
      if(file) {
        const res = await fetch('projects/' + file, { cache: 'no-store' });
        if (res.ok) {
          const html = await res.text();
          projectViewer.innerHTML = html;
          projectViewer.classList.remove('hidden');
          projectViewer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }
      history.replaceState(null, '', '#' + item.id);
    });

    track.addEventListener('scroll', updateArrows);
    window.addEventListener('resize', updateArrows);
    document.addEventListener('DOMContentLoaded', () => {
      updateArrows();
      const slug = location.hash ? location.hash.slice(1) : '';
      if (!slug) return;
      const item = document.getElementById(slug);
      if (item) setTimeout(() => item.click(), 120);
    });
  </script>
</body>
</html>
